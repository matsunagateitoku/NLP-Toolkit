{% extends "base.html" %}
{% block title %}Part-of-Speech Tagging{% endblock %}
{% block content %}
<div class="container">
    <h1>üè∑Ô∏è Part-of-Speech Tagging</h1>
    <p class="subtitle">Identify grammatical categories of words in your text</p>
    
    <form method="POST" class="input-form">
        <label for="user_input">Enter your text:</label>
        <textarea name="user_input" id="user_input" rows="6" placeholder="Enter text to analyze..." required></textarea>
        
        <button type="submit">Analyze POS Tags</button>
    </form>
    
    {% if error_message %}
        <div class="error">
            ‚ùå {{ error_message }}
        </div>
    {% endif %}
    
    {% if pos_html %}
        <div class="result">
            <h2>Text with POS Tags</h2>
            <p class="info-text">Each word is labeled with its part of speech (color-coded by category)</p>
            <div class="pos-visualization">
                {{ pos_html|safe }}
            </div>
        </div>
    {% endif %}
    
    {% if pos_tags %}
        <div class="result">
            <h2>All Words with Tags</h2>
            <div class="word-tag-list">
                {% for token, pos, tag in pos_tags %}
                    <span class="word-tag-item pos-{{ pos }}">
                        <strong>{{ token }}</strong>
                        <span class="tag-label">{{ pos }}</span>
                    </span>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    
    {% if grouped_tags %}
        <div class="result">
            <h2>Words Grouped by Type</h2>
            <div class="grouped-container">
                {% if grouped_tags.get('NOUN') or grouped_tags.get('PROPN') %}
                <div class="group-box">
                    <h3 class="group-title pos-NOUN">Nouns</h3>
                    <div class="group-words">
                        {% if grouped_tags.get('NOUN') %}
                            {% for word in grouped_tags['NOUN'] %}
                                <span class="group-word">{{ word }}</span>
                            {% endfor %}
                        {% endif %}
                        {% if grouped_tags.get('PROPN') %}
                            {% for word in grouped_tags['PROPN'] %}
                                <span class="group-word">{{ word }}</span>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
                {% endif %}
                
                {% if grouped_tags.get('VERB') or grouped_tags.get('AUX') %}
                <div class="group-box">
                    <h3 class="group-title pos-VERB">Verbs</h3>
                    <div class="group-words">
                        {% if grouped_tags.get('VERB') %}
                            {% for word in grouped_tags['VERB'] %}
                                <span class="group-word">{{ word }}</span>
                            {% endfor %}
                        {% endif %}
                        {% if grouped_tags.get('AUX') %}
                            {% for word in grouped_tags['AUX'] %}
                                <span class="group-word">{{ word }}</span>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
                {% endif %}
                
                {% if grouped_tags.get('ADJ') %}
                <div class="group-box">
                    <h3 class="group-title pos-ADJ">Adjectives</h3>
                    <div class="group-words">
                        {% for word in grouped_tags['ADJ'] %}
                            <span class="group-word">{{ word }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                
                {% if grouped_tags.get('ADV') %}
                <div class="group-box">
                    <h3 class="group-title pos-ADV">Adverbs</h3>
                    <div class="group-words">
                        {% for word in grouped_tags['ADV'] %}
                            <span class="group-word">{{ word }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                
                {% if grouped_tags.get('PRON') %}
                <div class="group-box">
                    <h3 class="group-title pos-PRON">Pronouns</h3>
                    <div class="group-words">
                        {% for word in grouped_tags['PRON'] %}
                            <span class="group-word">{{ word }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                
                {% if grouped_tags.get('DET') %}
                <div class="group-box">
                    <h3 class="group-title pos-DET">Determiners</h3>
                    <div class="group-words">
                        {% for word in grouped_tags['DET'] %}
                            <span class="group-word">{{ word }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                
                {% if grouped_tags.get('ADP') %}
                <div class="group-box">
                    <h3 class="group-title pos-ADP">Prepositions</h3>
                    <div class="group-words">
                        {% for word in grouped_tags['ADP'] %}
                            <span class="group-word">{{ word }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                
                {% if grouped_tags.get('CCONJ') or grouped_tags.get('SCONJ') %}
                <div class="group-box">
                    <h3 class="group-title pos-CONJ">Conjunctions</h3>
                    <div class="group-words">
                        {% if grouped_tags.get('CCONJ') %}
                            {% for word in grouped_tags['CCONJ'] %}
                                <span class="group-word">{{ word }}</span>
                            {% endfor %}
                        {% endif %}
                        {% if grouped_tags.get('SCONJ') %}
                            {% for word in grouped_tags['SCONJ'] %}
                                <span class="group-word">{{ word }}</span>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
                {% endif %}
                
                {% if grouped_tags.get('NUM') %}
                <div class="group-box">
                    <h3 class="group-title pos-NUM">Numbers</h3>
                    <div class="group-words">
                        {% for word in grouped_tags['NUM'] %}
                            <span class="group-word">{{ word }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    {% endif %}
    
    <p><a href="{{ url_for('index') }}">‚Üê Back to home</a></p>
</div>
{% endblock %}
